<!DOCTYPE html>
<html manifest="cache.manifest">
    <head>
        <meta charset="utf-8">
        <title>Budget</title>
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="default" />
        <meta name="viewport" content = "width = device-width, initial-scale = 1, user-scalable = no" />
        <link href="main.css" rel="stylesheet"></link>
        <link href="fontello.css" rel="stylesheet"></link>
    </head>
    <body>

        <div data-app class="wrapper">
            <div data-view-region></div>
        </div>

        <!-- Templates -->

        <script id="expense-row" type="text/html">
            <tr id="<%= id %>" data-expense-action>
                <td><%= fmt_date %></td>
                <td>$ <%= amount %></td>
                <td><%= running_total %></td>
            </tr>
        </script>

        <script id="week-view" type="text/html">
            <div class="left width-3 stat-block"><%= allowance %></div>
            <div class="left width-3 stat-block"><%= spent %></div>
            <div class="left width-3 stat-block"><%= difference %></div>
        </script>

        <script id="expenses-empty" type="text/html">
            <tr>
                <td colspan="3">
                    <div class="strong center padding-2">Log expenses below.</div>
                </td>
            </tr>
        </script>

        <script id="budget-row" type="text/html">
            <li 
                data-select-budget 
                id="<%= id %>"
                class="padding-2"
                >
                <%= name %> <span class="right">$<%= cummulative_total %></span>
            </li>
        </script>

        <script id="total-row" type="text/html">
            <li class="padding-2 clearfix">
                <div class="right"><span class="strong">Total<span>: <span>$<%= grand_total %></span></div>
            </li>
        </script>

        <script id="budget-selection" type="text/html">
            <h1 class="center padding-2">Budgets</h1>
            <ul 
                data-budget-list-mount
                class="list list-bordered rounded margin-1"
                />
            <% if (has_budgets) { %>
                <button data-new-budget class="padding-2 left link">New Budget</button>
            <% } else { %> 
                <div class="padding-2">
                    <button data-new-budget class="padding-2 rounded primary wide block">New Budget</button>
                </div>
            <% } %>
        </script>

        <script id="budget" type="text/html">
            <h1 class="padding-2 center">
                <button data-show-selection class="left no-flow link rounded text-large">
                    <i class="icon-left-open"></i>
                </button>
                <%= name %>
            </h1>
            <div class="row padding-1 expense-table">
                <table 
                    class="table table-bordered rounded center">
                    <thead>
                        <tr>
                            <th>Day</th>
                            <th>Amount</th>
                            <th>Remaining <span class="weak small">(from <span data-allowance-mount></span>)</span></th>
                        </tr>
                    </thead>
                    <tfoot>
                        <tr>
                            <td colspan="3">
                                <input 
                                    class="input-wide input-bordered rounded"
                                    data-expense-form 
                                    type="number" 
                                    placeholder="add new expense"
                                    />
                            </td>
                        </tr>
                    </tfoot>
                    <tbody data-expense-list></tbody>
                </table>
            </div>
            <div class="padding-1 row">
                <span class="right padding-2">
                    <span class="strong">Balance:</span> <span data-running-total-mount></span>
                </span>
                <button 
                    data-reset-mount
                    class="left padding-2 rounded link"
                    >Start New Week</button>
            </div>
        </script>

        <script src="main.TIMESTAMP.js"></script>
    </body>
</html>
